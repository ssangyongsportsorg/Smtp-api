# 部署檢查清單

## 部署前檢查

### ✅ 代碼準備
- [ ] 所有代碼已提交到 Git
- [ ] `package.json` 包含所有必要依賴
- [ ] `server.js` 是主入口文件
- [ ] `render.yaml` 配置正確
- [ ] `.env.example` 文件存在

### ✅ 數據庫配置
- [ ] Prisma schema 配置正確
- [ ] 數據庫連接字符串格式正確
- [ ] 數據庫權限設置正確

### ✅ 環境變量
- [ ] `DATABASE_URL` 已設置
- [ ] `JWT_SECRET` 已設置（強密碼）
- [ ] `SESSION_SECRET` 已設置（強密碼）
- [ ] `NODE_ENV=production`
- [ ] `PORT=10000`
- [ ] `ALLOWED_ORIGINS` 包含正確域名

## 部署過程檢查

### ✅ Render 設置
- [ ] 已創建 Render 帳號
- [ ] 已連接 GitHub 倉庫
- [ ] 選擇了正確的倉庫分支
- [ ] 配置了 Blueprint 或手動創建服務

### ✅ 服務配置
- [ ] Web 服務名稱正確
- [ ] Build Command: `npm install && npx prisma generate`
- [ ] Start Command: `npx prisma db push && npm start`
- [ ] 環境變量已正確設置

### ✅ 數據庫設置
- [ ] PostgreSQL 數據庫已創建
- [ ] 數據庫連接字符串已複製到環境變量
- [ ] 數據庫權限正確

## 部署後檢查

### ✅ 服務狀態
- [ ] Web 服務狀態為 "Live"
- [ ] 數據庫狀態為 "Available"
- [ ] 沒有錯誤日誌

### ✅ 功能測試
- [ ] 主頁面可以訪問
- [ ] 管理後台可以訪問 (`/admin`)
- [ ] 可以註冊管理員帳號
- [ ] 可以登入管理後台
- [ ] 可以配置 SMTP 設定
- [ ] 可以生成 API key
- [ ] 可以發送測試郵件

### ✅ 安全檢查
- [ ] HTTPS 正常工作
- [ ] CORS 配置正確
- [ ] 密鑰已安全設置
- [ ] 沒有敏感信息洩露

## 常見問題解決

### ❌ 部署失敗
**症狀**: Build 或 Deploy 失敗
**解決方案**:
1. 檢查 Build Logs
2. 確認 package.json 格式正確
3. 檢查 Node.js 版本兼容性
4. 確認所有依賴都已安裝

### ❌ 數據庫連接失敗
**症狀**: 應用啟動時數據庫連接錯誤
**解決方案**:
1. 檢查 DATABASE_URL 格式
2. 確認數據庫服務狀態
3. 檢查網絡連接
4. 確認數據庫權限

### ❌ 應用無法啟動
**症狀**: 服務狀態為 "Failed"
**解決方案**:
1. 檢查 Runtime Logs
2. 確認 Start Command 正確
3. 檢查環境變量設置
4. 確認端口配置

### ❌ CORS 錯誤
**症狀**: 前端無法訪問 API
**解決方案**:
1. 更新 ALLOWED_ORIGINS
2. 確認域名格式正確
3. 包含協議 (https://)
4. 檢查 CORS 中間件配置

### ❌ 郵件發送失敗
**症狀**: SMTP 配置後無法發送郵件
**解決方案**:
1. 檢查 SMTP 配置
2. 確認 SMTP 服務器狀態
3. 檢查防火牆設置
4. 確認認證信息正確

## 性能優化檢查

### ✅ 免費計劃優化
- [ ] 了解 15 分鐘休眠限制
- [ ] 設置監控告警
- [ ] 優化啟動時間

### ✅ 安全最佳實踐
- [ ] 定期更換密鑰
- [ ] 監控訪問日誌
- [ ] 定期更新依賴
- [ ] 備份重要數據

## 監控和維護

### ✅ 日常監控
- [ ] 檢查服務狀態
- [ ] 監控資源使用
- [ ] 查看錯誤日誌
- [ ] 檢查數據庫性能

### ✅ 定期維護
- [ ] 更新依賴包
- [ ] 檢查安全漏洞
- [ ] 備份數據庫
- [ ] 更新文檔

## 緊急聯繫

如果遇到無法解決的問題：

1. **查看文檔**: 參考 `RENDER_DEPLOYMENT.md`
2. **檢查日誌**: 在 Render Dashboard 中查看詳細日誌
3. **Render 支持**: 聯繫 Render 官方支持
4. **社區幫助**: 在相關論壇尋求幫助

## 成功指標

部署成功的標誌：

- ✅ 應用可以正常訪問
- ✅ 所有功能正常工作
- ✅ 沒有錯誤日誌
- ✅ 性能符合預期
- ✅ 安全配置正確